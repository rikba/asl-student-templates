\chapter{Result}
\label{sec:result}
In this project we have derived three different model based control algorithms, that are considering rotor drag. All three controller manage to follow constant trajectories offset-free. The MPC and NMPC controller are additionally capable of following dynamic trajectories. Also, these two have wind feed-forward capabilities that reduce the impact of wind on the multirotor.

The NMPC has the best controller performance and wind rejection, however it is most sensitive to measurement noise as well.

In terms of computation time, it has been shown, that online optimal control problems can be solved efficiently and fast. Even in the presence of large prediction horizons and many states and inputs, a high rate of less than $0.01 \si{\second}$ is obtained. 

Running the implemented control algorithms on an Intel Core i5 2.9 Ghz 4 cores processor with a single threaded MATLAB R2014b we established the computation times in table \ref{tab:computation_times}. The online optimization of the MPC OCP takes $0.85 \si{\milli\second}$ on average using CVXGEN. The online optimization of the NMPC OCP takes $2.46 \si{\milli\second}$ on average. However, the overall computation time of the MPC is still similar to the NMPC's, because in the MPC the disturbance estimator and the $N$ future steady-state reference states and inputs have to be calculated. Here the implemented code certainly has some optimization upside.
\begin{table}
\begin{center}
\caption{Computation times in $[\si{\milli\second}]$ for calculating the control inputs at each sampling instant using LEE, LQRI, MPC, NMPC.}\vspace{1ex}
\label{tab:computation_times}
\begin{tabular}{ll|cccc}
\hline
      & index  & LEE        & LQRI       & MPC        & NMPC       \\ \hline \hline
total & mean   & \num{0.28} & \num{1.72} & \num{4.25} & \num{4.33} \\
      & median & \num{0.28} & \num{1.67} & \num{4.19} & \num{4.22} \\
      & min    & \num{0.26} & \num{1.62} & \num{4.06} & \num{4.10} \\
      & max    & \num{0.40} & \num{2.17} & \num{5.05} & \num{6.67} \\
\hline
online OCP & mean   & -- & -- & \num{0.85} & \num{2.46}\\
           & median & -- & -- & \num{0.84} & \num{2.39}\\
           & min    & -- & -- & \num{0.80} & \num{2.31}\\
           & max    & -- & -- & \num{1.09} & \num{4.83}\\
\hline
dimensions & states & -- & 13 & 10 & 13 \\
 		   & inputs & -- & 3  & 3  & 3  \\
 		   & prediction horizon & -- & $\infty$ & \num{40} & \num{100} \\
\hline
\end{tabular}
\end{center}
\end{table}